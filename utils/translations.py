"""
Translation system for Pishgoo Dashboard
"""

TRANSLATIONS = {
    'en': {
        'app_title': 'Pishgoo Trading Dashboard',
        'login_title': 'Pishgoo Trading Dashboard',
        'password': 'Password',
        'login': 'Login',
        'incorrect_password': 'Incorrect password',
        'navigation': 'Navigation',
        'dashboard': 'Dashboard',
        'trading': 'Trading',
        'backtest': 'Backtest',
        'train_models': 'Train Models',
        'settings': 'Settings',
        'logout': 'Logout',
        'start_trading': 'Start Trading',
        'stop_trading': 'Stop Trading',
        'trading_active': 'Trading Active',
        'trading_paused': 'Trading Paused',
        'select_pair': 'Select Trading Pair',
        'refresh': 'Refresh',
        'current_price': 'Current Price',
        'price_chart': 'Price Chart',
        'prophet_forecast': 'Prophet Forecast',
        'trading_signal': 'Trading Signal',
        'account_balance': 'Account Balance',
        'generate_signal': 'Generate Signal',
        'execute_trade': 'Execute Trade',
        'amount': 'Amount',
        'price': 'Price (0 for market)',
        'order_placed': 'Order placed',
        'order_failed': 'Order failed',
        'error': 'Error',
        'backtesting': 'Backtesting',
        'initial_balance': 'Initial Balance (IRT)',
        'run_backtest': 'Run Backtest',
        'backtest_results': 'Backtest Results',
        'total_return': 'Total Return',
        'win_rate': 'Win Rate',
        'total_trades': 'Total Trades',
        'max_drawdown': 'Max Drawdown',
        'sharpe_ratio': 'Sharpe Ratio',
        'profit_factor': 'Profit Factor',
        'final_balance': 'Final Balance',
        'total_pnl': 'Total PnL',
        'trade_history': 'Trade History',
        'exchange_config': 'Exchange Configuration',
        'exchange': 'Exchange',
        'api_key': 'API Key',
        'api_secret': 'API Secret',
        'save_exchange': 'Save Exchange Settings',
        'exchange_saved': 'Exchange settings saved!',
        'trading_pairs': 'Trading Pairs',
        'pairs_input': 'Trading Pairs (comma separated)',
        'save_pairs': 'Save Pairs',
        'pairs_saved': 'Trading pairs saved!',
        'risk_management': 'Risk Management',
        'stop_loss': 'Stop Loss (%)',
        'take_profit': 'Take Profit (%)',
        'max_position_size': 'Max Position Size (%)',
        'save_risk': 'Save Risk Settings',
        'risk_saved': 'Risk settings saved!',
        'trading_amount': 'Trading Amount',
        'amount_per_trade': 'Amount per Trade (IRT)',
        'save_amount': 'Save Trading Amount',
        'amount_saved': 'Trading amount saved!',
        'ai_settings': 'AI Model Settings',
        'enable_ai': 'Enable AI Models',
        'select_models': 'Select Models',
        'confidence_threshold': 'Confidence Threshold',
        'save_ai': 'Save AI Settings',
        'ai_saved': 'AI settings saved!',
        'change_password': 'Change Password',
        'current_password': 'Current Password',
        'new_password': 'New Password',
        'confirm_password': 'Confirm Password',
        'save_password': 'Save Password',
        'password_saved': 'Password saved successfully!',
        'password_mismatch': 'Passwords do not match',
        'wrong_current_password': 'Current password is incorrect',
        'language': 'Language',
        'select_language': 'Select Language',
        'persian': 'Persian',
        'english': 'English',
        'password_too_short': 'Password must be at least 3 characters long',
        'model_training': 'Model Training',
        'train_all_models': 'Train All Models',
        'training_in_progress': 'Training in progress... This may take several minutes.',
        'training_started': 'Training started',
        'training_completed': 'Training completed successfully!',
        'training_failed': 'Training failed',
        'training_status': 'Training Status',
        'no_data_available': 'No data available for training. Check your API keys.',
        'no_market_data': 'No data available',
        'check_api_keys': 'Please check your API keys in Settings',
        'loading_market_data': 'Loading market data...',
        'models_trained': 'Models trained successfully',
        'training_ml_models': 'Training ML models (RandomForest & XGBoost)...',
        'training_lstm': 'Training LSTM model...',
        'training_prophet': 'Training Prophet model...',
    },
    'fa': {
        'app_title': 'داشبورد معاملاتی پیشگو',
        'login_title': 'داشبورد معاملاتی پیشگو',
        'password': 'رمز عبور',
        'login': 'ورود',
        'incorrect_password': 'رمز عبور نادرست است',
        'navigation': 'ناوبری',
        'dashboard': 'داشبورد',
        'trading': 'معاملات',
        'backtest': 'بک‌تست',
        'train_models': 'آموزش مدل‌ها',
        'settings': 'تنظیمات',
        'logout': 'خروج',
        'start_trading': 'شروع معاملات',
        'stop_trading': 'توقف معاملات',
        'trading_active': 'معاملات فعال',
        'trading_paused': 'معاملات متوقف',
        'select_pair': 'انتخاب جفت معاملاتی',
        'refresh': 'بروزرسانی',
        'current_price': 'قیمت فعلی',
        'price_chart': 'نمودار قیمت',
        'prophet_forecast': 'پیش‌بینی Prophet',
        'trading_signal': 'سیگنال معاملاتی',
        'account_balance': 'موجودی حساب',
        'generate_signal': 'تولید سیگنال',
        'execute_trade': 'اجرای معامله',
        'amount': 'مقدار',
        'price': 'قیمت (0 برای بازار)',
        'order_placed': 'سفارش ثبت شد',
        'order_failed': 'سفارش ناموفق بود',
        'error': 'خطا',
        'backtesting': 'بک‌تست',
        'initial_balance': 'موجودی اولیه (تومان)',
        'run_backtest': 'اجرای بک‌تست',
        'backtest_results': 'نتایج بک‌تست',
        'total_return': 'بازدهی کل',
        'win_rate': 'نرخ برد',
        'total_trades': 'تعداد معاملات',
        'max_drawdown': 'حداکثر افت',
        'sharpe_ratio': 'نسبت شارپ',
        'profit_factor': 'فاکتور سود',
        'final_balance': 'موجودی نهایی',
        'total_pnl': 'سود/زیان کل',
        'trade_history': 'تاریخچه معاملات',
        'exchange_config': 'تنظیمات صرافی',
        'exchange': 'صرافی',
        'api_key': 'کلید API',
        'api_secret': 'رمز API',
        'save_exchange': 'ذخیره تنظیمات صرافی',
        'exchange_saved': 'تنظیمات صرافی ذخیره شد!',
        'trading_pairs': 'جفت‌های معاملاتی',
        'pairs_input': 'جفت‌های معاملاتی (با کاما جدا کنید)',
        'save_pairs': 'ذخیره جفت‌ها',
        'pairs_saved': 'جفت‌های معاملاتی ذخیره شد!',
        'risk_management': 'مدیریت ریسک',
        'stop_loss': 'حد ضرر (%)',
        'take_profit': 'حد سود (%)',
        'max_position_size': 'حداکثر حجم معامله (%)',
        'save_risk': 'ذخیره تنظیمات ریسک',
        'risk_saved': 'تنظیمات ریسک ذخیره شد!',
        'trading_amount': 'مقدار معامله',
        'amount_per_trade': 'مقدار هر معامله (تومان)',
        'save_amount': 'ذخیره مقدار معامله',
        'amount_saved': 'مقدار معامله ذخیره شد!',
        'ai_settings': 'تنظیمات مدل‌های هوش مصنوعی',
        'enable_ai': 'فعال‌سازی مدل‌های AI',
        'select_models': 'انتخاب مدل‌ها',
        'confidence_threshold': 'حد آستانه اطمینان',
        'save_ai': 'ذخیره تنظیمات AI',
        'ai_saved': 'تنظیمات AI ذخیره شد!',
        'change_password': 'تغییر رمز عبور',
        'current_password': 'رمز عبور فعلی',
        'new_password': 'رمز عبور جدید',
        'confirm_password': 'تأیید رمز عبور',
        'save_password': 'ذخیره رمز عبور',
        'password_saved': 'رمز عبور با موفقیت ذخیره شد!',
        'password_mismatch': 'رمزهای عبور مطابقت ندارند',
        'wrong_current_password': 'رمز عبور فعلی نادرست است',
        'language': 'زبان',
        'select_language': 'انتخاب زبان',
        'persian': 'فارسی',
        'english': 'انگلیسی',
        'password_too_short': 'رمز عبور باید حداقل ۳ کاراکتر باشد',
        'model_training': 'آموزش مدل‌ها',
        'train_all_models': 'آموزش تمام مدل‌ها',
        'training_in_progress': 'در حال آموزش... این فرآیند ممکن است چند دقیقه طول بکشد.',
        'training_started': 'آموزش شروع شد',
        'training_completed': 'آموزش با موفقیت انجام شد!',
        'training_failed': 'آموزش ناموفق بود',
        'training_status': 'وضعیت آموزش',
        'no_data_available': 'داده‌ای برای آموزش موجود نیست. کلیدهای API را بررسی کنید.',
        'no_market_data': 'داده‌ای در دسترس نیست',
        'check_api_keys': 'لطفاً کلیدهای API را در تنظیمات بررسی کنید',
        'loading_market_data': 'در حال بارگذاری داده‌های بازار...',
        'models_trained': 'مدل‌ها با موفقیت آموزش داده شدند',
        'training_ml_models': 'در حال آموزش مدل‌های ML (RandomForest & XGBoost)...',
        'training_lstm': 'در حال آموزش مدل LSTM...',
        'training_prophet': 'در حال آموزش مدل Prophet...',
    }
}


def get_translation(key: str, lang: str = 'en') -> str:
    """
    Get translation for a key
    
    Args:
        key: Translation key
        lang: Language code ('en' or 'fa')
        
    Returns:
        Translated string or key if translation not found
    """
    lang = lang if lang in TRANSLATIONS else 'en'
    return TRANSLATIONS[lang].get(key, key)


def set_language(lang: str):
    """Set default language in session state"""
    import streamlit as st
    if 'language' not in st.session_state:
        st.session_state.language = lang

